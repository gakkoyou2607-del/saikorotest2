<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ã‚µã‚¤ã‚³ãƒ­å®Ÿè¡Œãƒ†ã‚¹ãƒˆ</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
</head>
<body>
    <h2>ã‚µã‚¤ã‚³ãƒ­</h2>

    <div id="loading">ğŸ”„ Python èª­ã¿è¾¼ã¿ä¸­...</div>

    <button id="btnRun" disabled>â–¶ å®Ÿè¡Œ</button>

    <pre id="output" style="white-space: pre-wrap; background:#eee; padding:10px; margin-top:10px;"></pre>

    <script>
    let pyodide;

    (async () => {
        pyodide = await loadPyodide();

        document.getElementById("loading").textContent = "Python èª­ã¿è¾¼ã¿å®Œäº† âœ”";
        document.getElementById("btnRun").disabled = false;
    })();

    document.getElementById("btnRun").addEventListener("click", async () => {

        const code = `
import random
a = random.randrange(1, 7)
print("å‡ºãŸç›®ã¯", a)
`;

        document.getElementById("output").textContent = "";

        pyodide.setStdout(s => {
            document.getElementById("output").textContent += s + "\n";
        });

        try {
            await pyodide.runPythonAsync(code);
        } catch(err) {
            document.getElementById("output").textContent = "ã‚¨ãƒ©ãƒ¼: " + err;
        }
    });
    </script>
</body>
</html>
